<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Kehrli</title>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

    <script>
        var mqtt_server = "";
        var mqtt_port = "";
        var mqtt_destname = "";
        
        function send_mqtt_msg() {
          mqtt_server = document.getElementById("mqtt_server").value;
          mqtt_port = Number(document.getElementById("mqtt_port").value);
         
        
          client = new Paho.MQTT.Client(mqtt_server, mqtt_port,"");
          client.connect({onSuccess:onConnect});
          document.getElementById("pubmsg").innerHTML = "Trying to connect...";
        }
        function onConnect() {
          document.getElementById("pubmsg").innerHTML = "New connection made...";
          var mqtt_destname = document.getElementById("mqtt_destname").value;
          var mqtt_msg = document.getElementById("mqtt_msg").value;   
          message = new Paho.MQTT.Message(mqtt_msg);
          message.destinationName = mqtt_destname;
          client.send(message);
          document.getElementById("pubmsg").innerHTML =  mqtt_msg +" was sent to : "+ mqtt_destname;
        }  
        </script>

    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>

    <h1>Daniel Kehrli</h1>

    <ul class="menu">
        <li><a href="/index.html">Home</a></li>
        <li><a class="active" href="mqtt.html">MQTT</a></li>
        <li><a href="blog.html">Blog </a></li>
        <li><a href="game.html">Mini Game </a></li>
        <li><a class="last" href="about.html">About</a></li>
    </ul>
    <br><br>

<center>
    Server Name: <input type="text" id="mqtt_server" value="test.mosquitto.org"><br><br>
    Websocket: <input type="text" id="mqtt_port" value="8080"><br><br>
    DestinationName: <input type="text" id="mqtt_destname" value="DanielLed"><br><br>
    Value: <input type="range" id="mqtt_msg" max="1000" min="0" value="0"><br><br>
    
    <button onclick="send_mqtt_msg()">Publish MQTT Message</button>
<br><br><br>
    <hr>
<br>
    <div id=pubmsg></div>
</center>

</body>

    <ul class="end">
        <li class="endli">Made By Daniel Kehrli</li>
        <li class="endli">All rights reserved</li>
    </ul>
</body>

</html>